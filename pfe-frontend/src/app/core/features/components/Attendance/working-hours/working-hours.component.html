<!-- src/app/features/attendance/working-hours/working-hours.component.html -->
<div class="p-4">
  <div class="card shadow-lg rounded-lg p-4">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-2xl font-semibold">Weekly Work Hours</h3>
      <div class="flex items-center gap-4">
        <span class="text-gray-600">{{ weekRange }}</span>
        <p-calendar 
          [(ngModel)]="selectedDate" 
          [showButtonBar]="true"
          dateFormat="yy-mm-dd"
          (onChange)="onDateChange($event)"
          (onSelect)="onDateSelect()"
          [disabled]="false"
          styleClass="p-inputtext-sm">
        </p-calendar>
      </div>
    </div>

    <p-table [value]="workHours" [loading]="isLoading">
      <ng-template pTemplate="header">
        <tr>
          <th>Employee</th>
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
          <th>Fri</th>
          <th>Sat</th>
          <th>Sun</th>
          <th>Total</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-row>
        <tr>
          <td class="font-medium">{{ row.first_name+ ' '+row.last_name}}</td>
          <td *ngFor="let d of ['MonHours','TueHours','WedHours','ThuHours','FriHours','SatHours','SunHours']">
            <ng-container *ngIf="row[d]; else absent">
              <div><strong>{{ row[d].hours.toFixed(2) }}h</strong></div>
              <div class="text-gray-500 text-sm">Break: {{ row[d].pause }}m</div>
              <div class="text-gray-500 text-sm">Pauses: {{ row[d].nbPause }}</div>
            </ng-container>
            <ng-template #absent>
              <span class="text-red-600">N/A</span>
            </ng-template>
          </td>
          <td class="font-semibold text-blue-600">
            {{ getTotal(row) }}
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
