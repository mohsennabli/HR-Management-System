<form [formGroup]="leaveRequestForm" (ngSubmit)="onSubmit()" class="space-y-6 bg-white p-8 rounded-xl shadow max-w-3xl mx-auto">
  <!-- Header -->
  <div class="border-b pb-4">
    <h2 class="text-2xl font-bold text-gray-800">Request Leave</h2>
    <p class="text-gray-600 mt-1">Fill in the details below to submit your leave request</p>
  </div>

  <!-- Add error message display -->
  <div *ngIf="errorMessage" class="p-message p-message-error">
    <div class="p-message-wrapper">
      <span class="p-message-icon pi pi-exclamation-triangle"></span>
      <span class="p-message-text">{{ errorMessage }}</span>
    </div>
  </div>

  <!-- Form Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Leave Type -->
    <div class="flex flex-col">
      <label class="font-medium text-gray-700 mb-2">Leave Type</label>
      <p-dropdown [options]="leaveTypes" 
                 formControlName="leave_type_id"
                 optionLabel="name"
                 optionValue="id"
                 placeholder="Select leave type"
                 [showClear]="true"
                 class="w-full">
      </p-dropdown>
      <small *ngIf="leaveRequestForm.get('leave_type_id')?.invalid && leaveRequestForm.get('leave_type_id')?.touched" 
             class="text-red-500 mt-1">
        Please select a leave type
      </small>
    </div>

    <!-- Days -->
    <div class="flex flex-col">
      <label class="font-medium text-gray-700 mb-2">Duration (Days)</label>
      <p-inputNumber formControlName="days" 
                    [showButtons]="true"
                    [readonly]="true"
                    class="w-full">
      </p-inputNumber>
      <small *ngIf="leaveRequestForm.get('days')?.invalid && leaveRequestForm.get('days')?.touched" 
             class="text-red-500 mt-1">
        Please select valid dates to calculate duration
      </small>
    </div>

    <!-- Start Date -->
    <div class="flex flex-col">
      <label class="font-medium text-gray-700 mb-2">Start Date</label>
      <p-calendar formControlName="start_date"
                 [showIcon]="true"
                 dateFormat="dd/mm/yy"
                 [minDate]="minDate"
                 placeholder="Select start date"
                 class="w-full">
      </p-calendar>
      <small *ngIf="leaveRequestForm.get('start_date')?.invalid && leaveRequestForm.get('start_date')?.touched" 
             class="text-red-500 mt-1">
        Please select a start date
      </small>
    </div>

    <!-- End Date -->
    <div class="flex flex-col">
      <label class="font-medium text-gray-700 mb-2">End Date</label>
      <p-calendar formControlName="end_date"
                 [showIcon]="true"
                 dateFormat="dd/mm/yy"
                 [minDate]="minDate"
                 placeholder="Select end date"
                 class="w-full">
      </p-calendar>
      <small *ngIf="leaveRequestForm.get('end_date')?.hasError('invalidRange')" class="text-red-500 mt-1">
        End date must be after start date
      </small>
      <small *ngIf="leaveRequestForm.get('end_date')?.invalid && leaveRequestForm.get('end_date')?.touched && !leaveRequestForm.get('end_date')?.hasError('invalidRange')" 
             class="text-red-500 mt-1">
        Please select an end date
      </small>
    </div>
  </div>

  <!-- Reason -->
  <div class="flex flex-col">
    <label class="font-medium text-gray-700 mb-2">Reason for Leave</label>
    <textarea pInputTextarea
              formControlName="reason"
              rows="4"
              placeholder="Please provide a reason for your leave request"
              class="w-full">
    </textarea>
    <small *ngIf="leaveRequestForm.get('reason')?.invalid && leaveRequestForm.get('reason')?.touched" 
           class="text-red-500 mt-1">
      Please provide a reason (minimum 10 characters)
    </small>
  </div>

  <!-- Buttons -->
  <div class="flex justify-end gap-3 pt-4 border-t">
    <button pButton type="button" 
            label="Cancel" 
            icon="pi pi-times" 
            class="p-button-sm p-button-secondary"
            (click)="onCancel()">
    </button>
    <button pButton type="submit" 
            label="Submit Request" 
            icon="pi pi-check" 
            class="p-button-sm p-button-primary"
            [disabled]="isSubmitting || leaveRequestForm.invalid">
    </button>
  </div>
</form>
