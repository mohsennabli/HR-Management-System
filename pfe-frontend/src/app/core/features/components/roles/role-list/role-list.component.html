<div class="role-list">
  <div class="header">
    <h2>Roles</h2>
    <button routerLink="/roles/create" class="btn-primary">
      + New Role
    </button>
  </div>

  <!-- Loading spinner -->
  <div *ngIf="loading" class="loading">Loading...</div>
  <!-- Error message -->
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- Roles table -->
  <table *ngIf="!loading && roles.length > 0">
    <thead class="text-black">
      <tr>
        <th>Name</th>
        <th>Permissions</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="text-black">
      <tr *ngFor="let role of roles">
        <!-- Role name -->
        <td>{{ role.name }}</td>

        <!-- Permissions -->
        <td>
          <div class="permission-count">
            {{ role.permissions.length || 0 }}
            {{ (role.permissions.length || 0) === 1 ? 'Permission' : 'Permissions' }}
          </div>
          <ng-container *ngIf="role.permissions.length > 0; else noPermissions">
            <span
              class="permission-badge"
              *ngFor="let perm of role.permissions"
            >
              {{ perm.name }}
            </span>
          </ng-container>
          <ng-template #noPermissions>
            <span class="no-permissions">No permissions assigned</span>
          </ng-template>
        </td>

        <!-- Actions: Edit and Delete -->
        <td class="actions">
          <button (click)="editRole(role.id)" class="btn-edit">
            Edit
          </button>
          <button (click)="deleteRole(role.id)" class="btn-delete">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- No data message -->
  <div *ngIf="!loading && roles.length === 0" class="no-data">
    No roles found
  </div>
</div>