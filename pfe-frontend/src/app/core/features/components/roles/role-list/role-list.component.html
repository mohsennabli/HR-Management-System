<div class="role-list">
  <div class="header">
    <h2>Roles</h2>
    <button routerLink="/admin/roles/create" class="btn-primary">
      + New Role
    </button>
  </div>

  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <table *ngIf="!loading && roles.length > 0">
    <thead class="text-black">
      <tr>
        <th>Name</th>
        <th>Permissions</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="text-black">
      <tr *ngFor="let role of roles">
        <!-- Nom du rÃ´le -->
        <td>{{ role.name }}</td>

        <!-- Compteur + liste des permissions -->
        <td>
          <div class="permission-count">
            {{ role.permissions?.length || 0 }}
            {{ (role.permissions?.length || 0) === 1 ? 'Permission' : 'Permissions' }}
          </div>
          <ng-container *ngIf="role.permissions?.length">
            <span
              class="permission-badge"
              *ngFor="let perm of role.permissions"
            >
              {{ perm.name }}
            </span>
          </ng-container>
        </td>

        <!-- Boutons d'action -->
        <td class="actions">
          <button (click)="editRole(role.id)" class="btn-edit">
            Edit
          </button>
          <button (click)="deleteRole(role.id)" class="btn-delete">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && roles.length === 0" class="no-data">
    No roles found
  </div>
</div>
